<?xml version="1.0" encoding="utf-8"?>
<aap>
    <tasklist>
        <initialisation>	
            <module><name>aamod_study_init</name></module>
        </initialisation>
		
        <main>
         
        <module><name>aamod_structuralfromnifti</name></module>
        <module><name>aamod_reorienttomiddle_structural</name></module>
        <module><name>aamod_reorienttomiddle_t2</name></module>
        
        <module><name>aamod_biascorrect</name></module>
        <module><name>aamod_biascorrect_t2</name></module>

        <module><name>aamod_epifromnifti</name></module>
        <module><name>aamod_reorienttomiddle_epi</name></module>

        <module><name>aamod_DVARS</name></module>
        <module><name>aamod_GLOBALMEAN</name></module>
        
        <module><name>aamod_realign</name></module>  
        <module><name>aamod_biascorrect_meanEPI</name></module>
        <module><name>aamod_coreg_extended</name></module>
            
        <module><name>aamod_coreg_t2_structural</name></module>

        <module><name>aamod_segment8_multichan</name>
            <extraparameters>
                <aap><tasklist><currenttask><settings>
                    <samp>2</samp>
                </settings></currenttask></tasklist></aap>
            </extraparameters>
        </module>
        
        <module><name>aamod_brainmask_nativegrey</name></module>	
        <module><name>aamod_reslicenativegreymask2epi</name></module> 
        <module><name>aamod_greyplot</name></module>
        <module><name>aamod_lossplot</name></module>

        <module><name>aamod_norm_write_epi</name></module>
        
        <module><name>aamod_smooth</name>
            <extraparameters>
                <aap><tasklist><currenttask><settings>
                    <FWHM>8</FWHM>
                </settings></currenttask></tasklist></aap>
            </extraparameters>
        </module> 
        
        <module><name>aamod_scrub_epis</name>
        <extraparameters>
        <aap><tasklist><currenttask><settings>
            <explicit_framelist>[1:4]</explicit_framelist>
            <scrub_criteria> metric_data.FD > metric_thresholds.FD.tenpercent </scrub_criteria>
        </settings></currenttask></tasklist></aap>
        </extraparameters>
        </module>
                
        <module><name>aamod_firstlevel_model</name>
        <extraparameters>
            <aap><tasklist><currenttask><settings>
                <includemovementpars>0</includemovementpars>
                <includespikes>1</includespikes>
            </settings></currenttask></tasklist></aap>
        </extraparameters>
        </module>
        
        <module><name>aamod_firstlevel_contrasts</name></module>
        
        <module><name>aamod_firstlevel_threshold</name>
        <extraparameters>
            <aap><tasklist><currenttask><settings>
                <description>10% FD (no rp), 0.001 UNC</description>
             </settings></currenttask></tasklist></aap>
        </extraparameters>
        </module>
        
        <!-- parametric 2nd level (all subjects) for comparison -->
 
        <module><name>aamod_secondlevel_model</name></module>
        <module><name>aamod_secondlevel_contrasts</name></module>
        <module><name>aamod_secondlevel_threshold</name>
        <extraparameters>
            <aap><tasklist><currenttask><settings>
                <description>10% FD (no rp), 0.05 FWE</description>
            </settings></currenttask></tasklist></aap>
        </extraparameters>
        </module>   
  
          <!-- all subjects -->
          
        <module><name>aamod_secondlevel_randomise</name></module>
        <module><name>aamod_secondlevel_randomise_threshold</name></module>

        <!-- subject subset (young) defined in userscript -->
     
        <module><name>aamod_secondlevel_randomise</name></module>
        <module><name>aamod_secondlevel_randomise_threshold</name></module>

        <!-- subject subset (older) defined in userscript -->
      
        <module><name>aamod_secondlevel_randomise</name></module>
        <module><name>aamod_secondlevel_randomise_threshold</name></module>
      
       <!-- 2 subject subsets (young v older) defined in userscript -->
      
        <module><name>aamod_secondlevel_randomise</name></module>
        <module><name>aamod_secondlevel_randomise_threshold</name></module>
 
        </main>
    </tasklist>
</aap>
